dataset: "nuscenes"
data_root: "${oc.env:NUSCENES_ROOT,/data/nuscenes}"  # Environment variable with fallback
version: "v1.0-mini"  # Start with mini for testing
split: "train"
batch_size: 8  # Smaller for real data
num_workers: 4

# Data dimensions
image_size: [224, 224]
num_points: 1024
radar_size: [64, 64]

# Preprocessing
normalize_images: true
imagenet_mean: [0.485, 0.456, 0.406]
imagenet_std: [0.229, 0.224, 0.225]

# Augmentation
augmentation:
  enabled: true
  random_crop: true
  color_jitter: true
  horizontal_flip: false  # Don't flip autonomous driving scenes

# Action extraction
strategic_action_classes: 10  # Match action_encoder config
tactical_action_dim: 3  # [steering, acceleration, velocity]
action_normalization: true

# Sensor selection
cameras: ["CAM_FRONT"]  # Start with front camera only
lidar_sensors: ["LIDAR_TOP"]
radar_sensors: ["RADAR_FRONT"]

# Temporal sequence settings (for JEPA)
temporal:
  enabled: false  # Enable with data.temporal.enabled=true
  seq_length: 5  # Number of context frames (past)
  pred_horizon: 3  # Number of future frames to predict
  frame_skip: 1  # Use every Nth frame (1 = all frames, 2 = half)
  min_scene_length: 10  # Skip scenes with fewer samples

# Ground truth label extraction (for evaluation)
labels:
  enabled: false  # Enable with data.labels.enabled=true

  # Trajectory prediction labels
  trajectory:
    pred_horizons: [1.0, 2.0, 3.0]  # Prediction horizons in seconds
    include_ego: true  # Extract ego vehicle trajectory
    include_agents: true  # Extract agent trajectories
    max_agents: 20  # Maximum number of agents to track

  # BEV segmentation labels
  bev:
    size: [200, 200]  # BEV image size in pixels (height, width)
    range: 50.0  # BEV range in meters (centered on ego)
    classes:  # Semantic classes
      - background
      - drivable_area
      - lane_divider
      - pedestrian_crossing
      - vehicle
      - pedestrian

  # Motion prediction labels
  motion:
    pred_horizon: 3.0  # Prediction horizon in seconds
    max_distance: 50.0  # Maximum distance from ego to track (meters)
    min_visibility: 0.5  # Minimum visibility score (0-4 scale)

  # Label caching
  cache:
    enabled: true  # Enable label caching to disk
    cache_dir: "./cache/labels"  # Cache directory
    force_recompute: false  # Force recomputation even if cache exists
